(this["webpackJsonpavito-tech"]=this["webpackJsonpavito-tech"]||[]).push([[0],{45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var c,n=a(1),r=a.n(n),o=a(20),s=a.n(o),l=a(0),i=function(){return Object(l.jsx)("div",{className:"header",children:Object(l.jsx)("h1",{children:"test app"})})},d=Object(n.createContext)(),m=function(){var e=Object(n.useContext)(d),t=e.fetchImages,a=e.fetchModalImage,c=e.images,r=e.loading,o=e.closeModalWindow,s=e.overlayStatus,i=e.changeOverlayStatus;Object(n.useEffect)((function(){t()}),[]);var m=function(){o(),i("overlay-hide")},u=function(){return Object(l.jsx)("div",{className:"overlay ".concat(s),onClick:m})},j=function(){var e=function(e){a(e.target.id),i("overlay-show")},t=function(){return c.map((function(t){return Object(l.jsx)("li",{onClick:e,children:Object(l.jsx)("img",{id:t.id,alt:"img",src:t.url})},t.id)}))};return Object(l.jsx)("ul",{children:r?Object(l.jsx)(b,{}):Object(l.jsx)(t,{})})},b=function(){return Object(l.jsx)("div",{className:"lds-dual-ring"})};return Object(l.jsxs)("div",{className:"images",children:[Object(l.jsx)(u,{}),Object(l.jsx)(j,{})]})},u=function(){return Object(l.jsxs)("div",{className:"footer",children:[Object(l.jsx)("hr",{}),Object(l.jsx)("p",{children:"\xa9 2018-2019"})]})},j=a(5),b=a.n(j),O=a(11),p=a(8),h=a(9),f=a.n(h),A=a(4),g=a(2),v="FETCH_IMAGES",x="FETCH_MODAL_IMAGE",y="CLOSE_MODAL_WINDOW",C="ADD_COMMENT",_="FETCH_MODAL_IMAGE_ERROR",E="CHANGE_OVERLAY_STATUS",N="IMAGES_LOADED",I=(c={},Object(A.a)(c,v,(function(e,t){var a=t.payload;return Object(g.a)(Object(g.a)({},e),{},{images:a})})),Object(A.a)(c,N,(function(e){return Object(g.a)(Object(g.a)({},e),{},{loading:!1})})),Object(A.a)(c,x,(function(e,t){var a=t.payload;return Object(g.a)(Object(g.a)({},e),{},{modalImage:a.url,modalComments:a.comments,modalId:a.modalId,modalDisplay:!0})})),Object(A.a)(c,y,(function(e,t){t.payload;return Object(g.a)(Object(g.a)({},e),{},{modalDisplay:!1})})),Object(A.a)(c,C,(function(e,t){var a=t.payload;return Object(g.a)(Object(g.a)({},e),{},{modalComments:a})})),Object(A.a)(c,_,(function(e){return Object(g.a)(Object(g.a)({},e),{},{modalError:!0})})),Object(A.a)(c,E,(function(e,t){var a=t.payload;return Object(g.a)(Object(g.a)({},e),{},{overlayStatus:a})})),Object(A.a)(c,"DEFAULT",(function(e){return e})),c),D=function(e,t){return(I[t.type]||I.DEFAULT)(e,t)},w=function(e){var t=e.children,a={baseUrl:"https://boiling-refuge-66454.herokuapp.com/images",images:[],loading:!0,modalImage:"",modalComments:[],modalDisplay:!1,modalLoading:!0,modalError:!1,modalId:"",overlayStatus:"overlay-hide"},c=Object(n.useReducer)(D,a),r=Object(p.a)(c,2),o=r[0],s=r[1],i=function(){var e=Object(O.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.baseUrl,f.a.get(t).then((function(e){var t=e.data;s({type:v,payload:t}),setTimeout((function(){return s({type:N})}),3e3)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(O.a)(b.a.mark((function e(t){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=a.baseUrl,f.a.get("".concat(c,"/").concat(t)).then((function(e){var a={url:e.data.url,comments:e.data.comments,modalId:t};s({type:x,payload:a})})).catch((function(){s({type:_})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=o.images,j=o.loading,h=o.modalImage,A=o.modalDisplay,g=o.modalComments,I=o.modalLoading,w=o.overlayStatus;return Object(l.jsx)(d.Provider,{value:{changeOverlayStatus:function(e){s({type:E,payload:e})},addCommentToImage:function(e){e.id=g.length+1;var t=g.concat(e),c=a.baseUrl,n=o.modalId;f.a.post("".concat(c,"/").concat(n,"/comments"),{name:e.date,comment:e.text,id:e.id}),s({type:C,payload:t})},fetchImages:i,closeModalWindow:function(){s({type:y})},fetchModalImage:m,modalImage:h,modalDisplay:A,images:u,loading:j,modalComments:g,modalLoading:I,overlayStatus:w},children:t})},M=function(){var e=Object(n.useContext)(d),t=e.modalImage,a=e.modalDisplay,c=e.closeModalWindow,o=e.modalComments,s=e.modalLoading,i=e.addCommentToImage,m=e.modalError,u=e.changeOverlayStatus,j=Object(n.useState)(""),b=Object(p.a)(j,2),O=b[0],h=b[1],f=function(){return o.map((function(e){return Object(l.jsxs)("div",{className:"_right-side_comment",children:[Object(l.jsx)("p",{className:"_comment_date",children:e.date}),Object(l.jsx)("p",{className:"_comment_text",children:e.text})]},e.id)}))};return Object(l.jsx)(r.a.Fragment,{children:m?Object(l.jsx)("p",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"}):Object(l.jsx)("div",{children:a?Object(l.jsxs)("div",{className:"modalWindow",children:[Object(l.jsxs)("div",{className:"_left-side",children:[s?Object(l.jsx)("div",{className:"lds-dual-ring"}):Object(l.jsx)("img",{src:t,alt:"big"}),Object(l.jsxs)("form",{className:"_left-side_form",children:[Object(l.jsx)("p",{className:"_form_input",children:Object(l.jsx)("input",{placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",name:"userName"})}),Object(l.jsx)("p",{className:"_form_input",children:Object(l.jsx)("input",{placeholder:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",name:"userComment"})}),O,Object(l.jsx)("input",{type:"submit",className:"_form_submit",onClick:function(e){e.preventDefault();var t=e.target.parentNode.elements,a={date:t.userName.value,text:t.userComment.value};a.date.length>0&&a.text.length>0?(i(a),h(""),t.userName.value="",t.userComment.value=""):h(Object(l.jsx)("p",{className:"_red-form",children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u0430 \u043f\u043e\u043b\u044f"}))},disable:"true",value:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 "})]})]}),Object(l.jsx)("div",{className:"_right-side",children:Object(l.jsx)(f,{})}),Object(l.jsx)("div",{className:"_modalWindow_close",onClick:function(){c(),u("overlay-hide")},children:Object(l.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACeSURBVHgBrdThDYMgEAXgl7YLuMFbpZt0g67ACp2oruEv3cAVPOL9QpG7w0ueUYEvEAjAXl8JES+qgYf+GCR/xFDq2KFsSJIZPpQ6JtU6eFC2MA9qxiyoG7tCw9gZ2o2V6C1YLkpWDVudXwYsH9qffuf3t2RBcGblMhP8h7+KhVGivQFm1IKZUQ/WRCNYFe3BDuhTHh/JhD5wxH7BcgP64jTEbxIV2AAAAABJRU5ErkJggg==",alt:"close"})})]}):null})})},S=function(){return Object(l.jsxs)(w,{children:[Object(l.jsx)(i,{}),Object(l.jsx)(m,{}),Object(l.jsx)(M,{}),Object(l.jsx)(u,{})]})};a(45);s.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(S,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.1dd6e24a.chunk.js.map