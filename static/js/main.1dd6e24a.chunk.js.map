{"version":3,"sources":["components/header/index.js","components/header/header.js","context/images/imagesContext.js","components/images/index.js","components/images/images.js","components/footer/footer.js","context/types.js","context/images/imagesReducer.js","context/images/imagesState.js","components/modal-window/modalWindow.js","images/close.png","components/app/index.js","components/app/app.js","index.js"],"names":["Header","className","ImagesContext","createContext","Images","useContext","fetchImages","fetchModalImage","images","loading","closeModalWindow","overlayStatus","changeOverlayStatus","useEffect","onOverlayClick","Overlay","onClick","ImagesContainer","onImgClick","event","target","id","Image","map","item","alt","src","url","Loading","Footer","FETCH_IMAGES","FETCH_MODAL_IMAGE","CLOSE_MODAL_WINDOW","ADD_COMMENT","FETCH_MODAL_IMAGE_ERROR","CHANGE_OVERLAY_STATUS","IMAGES_LOADED","handlers","state","payload","modalImage","modalComments","comments","modalId","modalDisplay","modalError","imagesReducer","action","type","DEFAULT","ImagesState","children","initialState","baseUrl","modalLoading","useReducer","dispatch","a","axios","get","then","res","data","setTimeout","image","catch","Provider","value","status","addCommentToImage","comment","length","newComments","concat","post","name","date","text","ModalWindow","useState","valueError","setValueError","CommentsCointainer","Fragment","placeholder","preventDefault","valueForm","parentNode","elements","userName","userComment","disable","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1dd6e24a.chunk.js","sourcesContent":["import Header from \"./header\";\r\n\r\nexport default Header","const Header = () => {\r\n    return (\r\n            <div className=\"header\">\r\n                <h1>test app</h1>\r\n            </div>\r\n    )\r\n}\r\n\r\nexport default Header","import {createContext} from 'react';\r\n\r\nexport const ImagesContext = createContext();","import Images from \"./images\";\r\n\r\nexport default Images","import React, { useContext, useEffect, useState }  from \"react\";\r\nimport { ImagesContext } from \"../../context/images/imagesContext\";\r\n\r\nconst Images = () => {\r\n    const {fetchImages, fetchModalImage, images, loading, closeModalWindow, overlayStatus, changeOverlayStatus} = useContext(ImagesContext);\r\n        useEffect(() => {\r\n            // eslint-disable-next-line react-hooks/exhaustive-deps\r\n            fetchImages()}, [] );\r\n\r\n    const onOverlayClick = () => {\r\n        closeModalWindow();\r\n        changeOverlayStatus('overlay-hide');\r\n    }\r\n            \r\n    const Overlay = () => {\r\n        return (\r\n        <div className={`overlay ${overlayStatus}`} onClick={onOverlayClick}>\r\n        </div>\r\n        )\r\n    }\r\n    const ImagesContainer = () => {   \r\n        const onImgClick = (event) => {\r\n            fetchModalImage(event.target.id);\r\n            changeOverlayStatus('overlay-show')\r\n\r\n        }      \r\n        const Image = () => {return ( images.map (                \r\n                item => <li onClick={onImgClick} key={item.id}>\r\n                <img id={item.id} alt=\"img\"  src={item.url}/>\r\n                </li>\r\n            )  )}\r\n            return ( \r\n                <ul>{loading ? <Loading /> : <Image /> }</ul>          \r\n            )          \r\n    }\r\n\r\n    const Loading = () => {\r\n        return <div className=\"lds-dual-ring\"></div>\r\n    }\r\n    \r\n\r\n    \r\n    return (\r\n        <div className=\"images\">       \r\n            <Overlay />     \r\n            <ImagesContainer />                       \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Images","import React from \"react\";\r\n\r\nconst Footer = () => {\r\n    return (\r\n        <div className=\"footer\">\r\n            <hr></hr>\r\n            <p>© 2018-2019</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Footer","export const FETCH_IMAGES= 'FETCH_IMAGES';\r\nexport const FETCH_MODAL_IMAGE= 'FETCH_MODAL_IMAGE';\r\nexport const CLOSE_MODAL_WINDOW= 'CLOSE_MODAL_WINDOW';\r\nexport const ADD_COMMENT= 'ADD_COMMENT';\r\nexport const FETCH_MODAL_IMAGE_ERROR='FETCH_MODAL_IMAGE_ERROR';\r\nexport const CHANGE_OVERLAY_STATUS='CHANGE_OVERLAY_STATUS';\r\nexport const IMAGES_LOADED = 'IMAGES_LOADED'","import { FETCH_IMAGES, FETCH_MODAL_IMAGE, CLOSE_MODAL_WINDOW, ADD_COMMENT, FETCH_MODAL_IMAGE_ERROR, CHANGE_OVERLAY_STATUS, IMAGES_LOADED } from \"../types\"\r\n\r\nconst handlers = {\r\n    [FETCH_IMAGES]: (state, {payload}) => {\r\n        return ({...state, images: payload})\r\n    },\r\n    [IMAGES_LOADED]: (state) => {\r\n        return({...state, loading: false})\r\n    }, \r\n    [FETCH_MODAL_IMAGE]: (state, {payload}) => {\r\n        return ({...state, modalImage: payload.url, modalComments: payload.comments, modalId: payload.modalId, modalDisplay: true})\r\n    },\r\n    [CLOSE_MODAL_WINDOW]: (state, {payload}) => {\r\n        return ({...state, modalDisplay: false})\r\n    },\r\n    [ADD_COMMENT]: (state, {payload}) => {\r\n        return ({...state, modalComments: payload})\r\n    },\r\n    [FETCH_MODAL_IMAGE_ERROR]: (state) => {\r\n        return ({...state, modalError: true})\r\n    },\r\n    [CHANGE_OVERLAY_STATUS]: (state, {payload}) =>{\r\n        return ({...state, overlayStatus: payload})\r\n    },\r\n    DEFAULT: state => state\r\n}\r\n\r\nexport const imagesReducer = (state, action) => {\r\n    const handler = handlers[action.type] || handlers.DEFAULT\r\n    return handler(state, action)\r\n}\r\n","import React, {useReducer} from \"react\";\r\nimport { ImagesContext } from './imagesContext';\r\nimport axios from 'axios';\r\nimport {imagesReducer} from './imagesReducer';\r\nimport {FETCH_IMAGES, FETCH_MODAL_IMAGE, CLOSE_MODAL_WINDOW, ADD_COMMENT, FETCH_MODAL_IMAGE_ERROR, CHANGE_OVERLAY_STATUS, IMAGES_LOADED } from '../types';\r\n\r\n\r\n\r\nexport const ImagesState = ({children}) => {\r\n    const initialState = {\r\n    baseUrl: 'https://boiling-refuge-66454.herokuapp.com/images',\r\n    images:[],\r\n    loading: true,\r\n    modalImage:'',\r\n    modalComments:[],\r\n    modalDisplay: false,\r\n    modalLoading: true,\r\n    modalError: false,\r\n    modalId:'',\r\n    overlayStatus: 'overlay-hide'\r\n}\r\n\r\n    const [state, dispatch] = useReducer (imagesReducer, initialState); \r\n\r\n    const fetchImages = async () => {\r\n        const {baseUrl} = initialState\r\n        axios.get(baseUrl)\r\n        .then((res) => {\r\n            let images = res.data\r\n            dispatch(({type: FETCH_IMAGES, payload: images}));\r\n            setTimeout(() => dispatch(({type: IMAGES_LOADED})), 3000)   \r\n        })\r\n            \r\n    }\r\n\r\n    const fetchModalImage = async (id) => {\r\n        const {baseUrl} = initialState;\r\n        axios.get(`${baseUrl}/${id}`)\r\n        .then((res) => {\r\n            let image = {\r\n                url: res.data.url,\r\n                comments: res.data.comments,\r\n                modalId: id\r\n            };\r\n            dispatch(({type: FETCH_MODAL_IMAGE, payload: image}))\r\n        })\r\n        .catch(() => {\r\n            dispatch(({type: FETCH_MODAL_IMAGE_ERROR}))\r\n        })\r\n    }\r\n\r\n    const addCommentToImage = (comment) => {\r\n        comment.id = modalComments.length + 1;\r\n        let newComments = modalComments.concat(comment);\r\n        const {baseUrl} = initialState;\r\n        const {modalId} = state;\r\n        axios.post(`${baseUrl}/${modalId}/comments`, {name: comment.date, comment: comment.text, id:  comment.id})\r\n        dispatch(({type:ADD_COMMENT, payload: newComments}))\r\n    }\r\n\r\n    const changeOverlayStatus = (status) => {\r\n        dispatch(({type: CHANGE_OVERLAY_STATUS, payload: status}))\r\n    }\r\n\r\n    const closeModalWindow = () => {dispatch(({type: CLOSE_MODAL_WINDOW}))}\r\n\r\n    const {images, loading, modalImage, modalDisplay, modalComments, modalLoading, overlayStatus} = state\r\n    return (\r\n        <ImagesContext.Provider value={{changeOverlayStatus, addCommentToImage, fetchImages, closeModalWindow, fetchModalImage, modalImage, modalDisplay, images, loading, modalComments, modalLoading, overlayStatus}}>\r\n            {children}\r\n        </ImagesContext.Provider>\r\n    )\r\n}","import React, { useContext, useState } from \"react\";\r\nimport { ImagesContext } from \"../../context/images/imagesContext\";\r\nimport close from '../../images/close.png';\r\n\r\nconst ModalWindow = () => {\r\n    const {modalImage, modalDisplay, closeModalWindow, modalComments, modalLoading, addCommentToImage, modalError, changeOverlayStatus} = useContext(ImagesContext);\r\n    const onCloseButton = () => {\r\n        closeModalWindow();\r\n        changeOverlayStatus('overlay-hide');\r\n    }\r\n\r\n    const [valueError, setValueError] = useState('');\r\n    const onClickSubmit = (event) => {\r\n        event.preventDefault();       \r\n        const valueForm = event.target.parentNode.elements;\r\n        let comments = {date: valueForm.userName.value, text: valueForm.userComment.value};  \r\n        if (comments.date.length>0 && comments.text.length>0) {\r\n            addCommentToImage(comments);\r\n            setValueError('')\r\n            valueForm.userName.value = '';\r\n            valueForm.userComment.value = '';\r\n            \r\n        }\r\n        else {setValueError(<p className=\"_red-form\">Заполните оба поля</p>);}\r\n       }\r\n    \r\n    const CommentsCointainer = () => {\r\n        return (            \r\n                modalComments.map(item => { return (\r\n                    \r\n                        <div className=\"_right-side_comment\" key={item.id}>\r\n                            <p className=\"_comment_date\" >{item.date}</p>\r\n                            <p className=\"_comment_text\">{item.text}</p>\r\n                        </div>                    \r\n                )})                \r\n        )\r\n    }\r\n\r\n    return (           \r\n            <React.Fragment>\r\n                {modalError ?\r\n                    <p>Ошибка загрузки</p>\r\n                    :\r\n                    <div>\r\n                        {modalDisplay ?\r\n                            <div className=\"modalWindow\">\r\n                                <div className=\"_left-side\">\r\n                                    {modalLoading\r\n                                    ?\r\n                                    <div className=\"lds-dual-ring\"></div>\r\n                                    : <img src={modalImage} alt=\"big\"/>  \r\n                                    }\r\n                                    <form className=\"_left-side_form\">\r\n                                        <p className=\"_form_input\"><input placeholder=\"Ваше имя\" name=\"userName\"></input></p>\r\n                                        <p className=\"_form_input\"><input placeholder=\"Ваш комментарий\" name=\"userComment\"></input></p>\r\n                                        {valueError}\r\n                                        <input type=\"submit\" className=\"_form_submit\" onClick={onClickSubmit} disable=\"true\" value=\"Оставить комментарий \"></input>\r\n                                    </form> \r\n                                </div>\r\n                                <div className=\"_right-side\">\r\n                                    <CommentsCointainer />  \r\n                                </div>\r\n                                <div className=\"_modalWindow_close\" onClick={onCloseButton}>\r\n                                    <img src={close}   alt=\"close\" />\r\n                                </div>\r\n                                \r\n                            </div> \r\n                        :null}\r\n                    </div>\r\n                }\r\n            </React.Fragment>\r\n        \r\n    )\r\n}\r\n\r\nexport default ModalWindow","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACeSURBVHgBrdThDYMgEAXgl7YLuMFbpZt0g67ACp2oruEv3cAVPOL9QpG7w0ueUYEvEAjAXl8JES+qgYf+GCR/xFDq2KFsSJIZPpQ6JtU6eFC2MA9qxiyoG7tCw9gZ2o2V6C1YLkpWDVudXwYsH9qffuf3t2RBcGblMhP8h7+KhVGivQFm1IKZUQ/WRCNYFe3BDuhTHh/JhD5wxH7BcgP64jTEbxIV2AAAAABJRU5ErkJggg==\"","import App from \"./app\";\r\n\r\nexport default App","import React from \"react\";\nimport Header from \"../header\";\nimport Images from \"../images\";\nimport Footer from \"../footer/footer\";\nimport { ImagesState } from \"../../context/images/imagesState\";\nimport ModalWindow from \"../modal-window/modalWindow\";\n\nconst App = () => {\n \n  return (\n      <ImagesState>\n        <Header />\n        <Images />\n        <ModalWindow />\n        <Footer />\n      </ImagesState>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/app';\nimport './styles/css/index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}