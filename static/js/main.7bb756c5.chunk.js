(this["webpackJsonpavito-tech"]=this["webpackJsonpavito-tech"]||[]).push([[0],{45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n,c=a(1),o=a.n(c),r=a(20),s=a.n(r),l=a(0),i=function(){return Object(l.jsx)("div",{className:"header",children:Object(l.jsx)("h1",{children:"test app"})})},d=Object(c.createContext)(),m=function(){var e=Object(c.useContext)(d),t=e.fetchImages,a=e.fetchModalImage,n=e.images,o=e.loading,r=e.closeModalWindow,s=e.overlayStatus,i=e.changeOverlayStatus;Object(c.useEffect)((function(){t()}),[]);var m=function(){r(),i("overlay-hide")},u=function(){return Object(l.jsx)("div",{className:"overlay ".concat(s),onClick:m})},j=function(){var e=function(e){a(e.target.id),i("overlay-show")},t=function(){return n.map((function(t){return Object(l.jsx)("li",{onClick:e,children:Object(l.jsx)("img",{id:t.id,alt:"",src:t.url})},t.id)}))};return Object(l.jsx)("ul",{children:o?Object(l.jsx)(b,{}):Object(l.jsx)(t,{})})},b=function(){return Object(l.jsx)("div",{className:"lds-dual-ring"})};return Object(l.jsxs)("div",{className:"images",children:[Object(l.jsx)(u,{}),Object(l.jsx)(j,{})]})},u=function(){return Object(l.jsxs)("div",{className:"footer",children:[Object(l.jsx)("hr",{}),Object(l.jsx)("p",{children:"\xa9 2018-2019"})]})},j=a(5),b=a.n(j),O=a(11),p=a(8),h=a(9),f=a.n(h),g=a(4),A=a(3),x="FETCH_IMAGES",v="FETCH_MODAL_IMAGE",y="CLOSE_MODAL_WINDOW",C="ADD_COMMENT",E="FETCH_MODAL_IMAGE_ERROR",_="CHANGE_OVERLAY_STATUS",N=(n={},Object(g.a)(n,x,(function(e,t){var a=t.payload;return Object(A.a)(Object(A.a)({},e),{},{images:a,loading:!1})})),Object(g.a)(n,v,(function(e,t){var a=t.payload;return Object(A.a)(Object(A.a)({},e),{},{modalImage:a.url,modalComments:a.comments,modalId:a.modalId,modalDisplay:!0,modalLoading:!1})})),Object(g.a)(n,y,(function(e){return Object(A.a)(Object(A.a)({},e),{},{modalDisplay:!1})})),Object(g.a)(n,C,(function(e,t){var a=t.payload;return Object(A.a)(Object(A.a)({},e),{},{modalComments:a})})),Object(g.a)(n,E,(function(e){return Object(A.a)(Object(A.a)({},e),{},{modalError:!0,modalDisplay:!0,modalLoading:!1})})),Object(g.a)(n,_,(function(e,t){var a=t.payload;return Object(A.a)(Object(A.a)({},e),{},{overlayStatus:a})})),Object(g.a)(n,"DEFAULT",(function(e){return e})),n),I=function(e,t){return(N[t.type]||N.DEFAULT)(e,t)},D=function(e){var t=e.children,a={baseUrl:"https://boiling-refuge-66454.herokuapp.com/images",images:[],loading:!0,modalImage:"",modalComments:[],modalDisplay:!1,modalLoading:!0,modalError:!1,modalId:"",overlayStatus:"overlay-hide"},n=Object(c.useReducer)(I,a),o=Object(p.a)(n,2),r=o[0],s=o[1],i=function(){var e=Object(O.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.baseUrl,f.a.get(t).then((function(e){var t=e.data;s({type:x,payload:t})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(O.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.baseUrl,f.a.get("".concat(n,"/").concat(t)).then((function(e){var a={url:e.data.url,comments:e.data.comments,modalId:t};s({type:v,payload:a})})).catch((function(){s({type:E})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=r.images,j=r.loading,h=r.modalImage,g=r.modalDisplay,A=r.modalComments,N=r.modalLoading,D=r.overlayStatus,w=r.modalError;return Object(l.jsx)(d.Provider,{value:{changeOverlayStatus:function(e){s({type:_,payload:e})},addCommentToImage:function(e){e.id=A.length+1;var t=A.concat(e),n=a.baseUrl,c=r.modalId;f.a.post("".concat(n,"/").concat(c,"/comments"),{name:e.date,comment:e.text,id:e.id}),s({type:C,payload:t})},fetchImages:i,closeModalWindow:function(){s({type:y})},fetchModalImage:m,modalImage:h,modalDisplay:g,images:u,loading:j,modalComments:A,modalLoading:N,overlayStatus:D,modalError:w},children:t})},w=function(){var e=Object(c.useContext)(d),t=e.modalImage,a=e.modalDisplay,n=e.closeModalWindow,r=e.modalComments,s=e.modalLoading,i=e.addCommentToImage,m=e.modalError,u=e.changeOverlayStatus,j=Object(c.useState)(""),b=Object(p.a)(j,2),O=b[0],h=b[1],f=function(){return r.map((function(e){return Object(l.jsxs)("div",{className:"_right-side_comment",children:[Object(l.jsx)("p",{className:"_comment_date",children:e.date}),Object(l.jsx)("p",{className:"_comment_text",children:e.text})]},e.id)}))},g=function(){return m?(console.log("error"),Object(l.jsx)("p",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"})):null};return Object(l.jsx)(o.a.Fragment,{children:a?Object(l.jsxs)("div",{className:"modalWindow",children:[Object(l.jsxs)("div",{className:"_left-side",children:[Object(l.jsx)(g,{}),s||m?Object(l.jsx)("div",{className:"lds-dual-ring"}):Object(l.jsx)("img",{src:t,alt:"big"}),Object(l.jsx)("div",{className:"_right-side",children:Object(l.jsx)(f,{})}),Object(l.jsxs)("form",{className:"_left-side_form",children:[Object(l.jsx)("p",{className:"_form_input",children:Object(l.jsx)("input",{placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",name:"userName"})}),Object(l.jsx)("p",{className:"_form_input",children:Object(l.jsx)("input",{placeholder:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",name:"userComment"})}),O,Object(l.jsx)("input",{type:"submit",className:"_form_submit",onClick:function(e){e.preventDefault();var t=e.target.parentNode.elements,a={date:t.userName.value,text:t.userComment.value};a.date.length>0&&a.text.length>0?(i(a),h(""),t.userName.value="",t.userComment.value=""):h(Object(l.jsx)("p",{className:"_red-form",children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u0430 \u043f\u043e\u043b\u044f"}))},disable:"true",value:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 "})]})]}),Object(l.jsx)("div",{className:"_modalWindow_close",onClick:function(){n(),u("overlay-hide")},children:Object(l.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACeSURBVHgBrdThDYMgEAXgl7YLuMFbpZt0g67ACp2oruEv3cAVPOL9QpG7w0ueUYEvEAjAXl8JES+qgYf+GCR/xFDq2KFsSJIZPpQ6JtU6eFC2MA9qxiyoG7tCw9gZ2o2V6C1YLkpWDVudXwYsH9qffuf3t2RBcGblMhP8h7+KhVGivQFm1IKZUQ/WRCNYFe3BDuhTHh/JhD5wxH7BcgP64jTEbxIV2AAAAABJRU5ErkJggg==",alt:"close"})})]}):null})},M=function(){return Object(l.jsxs)(D,{children:[Object(l.jsx)(i,{}),Object(l.jsx)(m,{}),Object(l.jsx)(w,{}),Object(l.jsx)(u,{})]})};a(45);s.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(M,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.7bb756c5.chunk.js.map