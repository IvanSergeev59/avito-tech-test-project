{"version":3,"sources":["components/header/index.js","components/header/header.js","context/images/imagesContext.js","components/images/index.js","components/images/images.js","components/footer/footer.js","context/types.js","context/images/imagesReducer.js","context/images/imagesState.js","components/modal-window/modalWindow.js","images/close.png","components/app/index.js","components/app/app.js","index.js"],"names":["Header","className","ImagesContext","createContext","Images","useContext","fetchImages","fetchModalImage","images","loading","closeModalWindow","overlayStatus","changeOverlayStatus","useEffect","onOverlayClick","Overlay","onClick","ImagesContainer","onImgClick","event","target","id","Image","map","item","alt","src","url","Loading","Footer","FETCH_IMAGES","FETCH_MODAL_IMAGE","CLOSE_MODAL_WINDOW","ADD_COMMENT","FETCH_MODAL_IMAGE_ERROR","CHANGE_OVERLAY_STATUS","handlers","state","payload","modalImage","modalComments","comments","modalId","modalDisplay","modalLoading","modalError","imagesReducer","action","type","DEFAULT","ImagesState","children","initialState","baseUrl","useReducer","dispatch","a","axios","get","then","res","data","image","catch","Provider","value","status","addCommentToImage","comment","length","newComments","concat","post","name","date","text","ModalWindow","useState","valueError","setValueError","CommentsCointainer","ModalError","console","log","Fragment","placeholder","preventDefault","valueForm","parentNode","elements","userName","userComment","disable","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7bb756c5.chunk.js","sourcesContent":["import Header from \"./header\";\r\n\r\nexport default Header","const Header = () => {\r\n    return (\r\n            <div className=\"header\">\r\n                <h1>test app</h1>\r\n            </div>\r\n    )\r\n}\r\n\r\nexport default Header","import {createContext} from 'react';\r\n\r\nexport const ImagesContext = createContext();","import Images from \"./images\";\r\n\r\nexport default Images","import React, { useContext, useEffect, useState }  from \"react\";\r\nimport { ImagesContext } from \"../../context/images/imagesContext\";\r\n\r\nconst Images = () => {\r\n    const {fetchImages, fetchModalImage, images, loading, closeModalWindow, overlayStatus, changeOverlayStatus} = useContext(ImagesContext);\r\n\r\n    // loading images from server \r\n    useEffect(() => {\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n        fetchImages()}, [] );\r\n\r\n    // user clicked at overlay window\r\n    const onOverlayClick = () => {\r\n        closeModalWindow();\r\n        changeOverlayStatus('overlay-hide');\r\n    }\r\n            \r\n    // overlay component\r\n    const Overlay = () => {\r\n        return (\r\n        <div className={`overlay ${overlayStatus}`} onClick={onOverlayClick}>\r\n        </div>\r\n        )\r\n    }\r\n\r\n    // container with images\r\n    const ImagesContainer = () => { \r\n         \r\n        const onImgClick = (event) => {\r\n            fetchModalImage(event.target.id);\r\n            changeOverlayStatus('overlay-show');\r\n\r\n        } \r\n\r\n        const Image = () => {return ( images.map (                \r\n                item => <li onClick={onImgClick} key={item.id}>\r\n                <img id={item.id} alt=\"\"  src={item.url}/>\r\n                </li>\r\n        ))}\r\n            \r\n        return ( \r\n            <ul>{loading ? <Loading /> : <Image /> }</ul>          \r\n        )          \r\n    }\r\n\r\n    // loader\r\n    const Loading = () => {\r\n        return <div className=\"lds-dual-ring\"></div>\r\n    }\r\n    \r\n    return (\r\n        <div className=\"images\">       \r\n            <Overlay />     \r\n            <ImagesContainer />                       \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Images","import React from \"react\";\r\n\r\nconst Footer = () => {\r\n    return (\r\n        <div className=\"footer\">\r\n            <hr></hr>\r\n            <p>© 2018-2019</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Footer","export const FETCH_IMAGES= 'FETCH_IMAGES';\r\nexport const FETCH_MODAL_IMAGE= 'FETCH_MODAL_IMAGE';\r\nexport const CLOSE_MODAL_WINDOW= 'CLOSE_MODAL_WINDOW';\r\nexport const ADD_COMMENT= 'ADD_COMMENT';\r\nexport const FETCH_MODAL_IMAGE_ERROR='FETCH_MODAL_IMAGE_ERROR';\r\nexport const CHANGE_OVERLAY_STATUS='CHANGE_OVERLAY_STATUS';\r\nexport const IMAGES_LOADED = 'IMAGES_LOADED'","import { FETCH_IMAGES, FETCH_MODAL_IMAGE, CLOSE_MODAL_WINDOW, ADD_COMMENT, FETCH_MODAL_IMAGE_ERROR, CHANGE_OVERLAY_STATUS } from \"../types\"\r\n\r\nconst handlers = {\r\n    [FETCH_IMAGES]: (state, {payload}) => {\r\n        return ({...state, images: payload, loading: false})\r\n    },\r\n    [FETCH_MODAL_IMAGE]: (state, {payload}) => {\r\n        return ({...state, modalImage: payload.url, modalComments: payload.comments, modalId: payload.modalId, modalDisplay: true, modalLoading: false})\r\n    },\r\n    [CLOSE_MODAL_WINDOW]: (state) => {\r\n        return ({...state, modalDisplay: false})\r\n    },\r\n    [ADD_COMMENT]: (state, {payload}) => {\r\n        return ({...state, modalComments: payload})\r\n    },\r\n    [FETCH_MODAL_IMAGE_ERROR]: (state) => {\r\n        return ({...state, modalError: true, modalDisplay: true, modalLoading: false})\r\n    },\r\n    [CHANGE_OVERLAY_STATUS]: (state, {payload}) =>{\r\n        return ({...state, overlayStatus: payload})\r\n    },\r\n    DEFAULT: state => state\r\n}\r\n\r\nexport const imagesReducer = (state, action) => {\r\n    const handler = handlers[action.type] || handlers.DEFAULT\r\n    return handler(state, action)\r\n}\r\n","import React, {useReducer} from \"react\";\r\nimport { ImagesContext } from './imagesContext';\r\nimport axios from 'axios';\r\nimport {imagesReducer} from './imagesReducer';\r\nimport {FETCH_IMAGES, FETCH_MODAL_IMAGE, CLOSE_MODAL_WINDOW, ADD_COMMENT, FETCH_MODAL_IMAGE_ERROR, CHANGE_OVERLAY_STATUS} from '../types';\r\n\r\n\r\n\r\nexport const ImagesState = ({children}) => {\r\n    const initialState = {\r\n    baseUrl: 'https://boiling-refuge-66454.herokuapp.com/images',\r\n    images:[],\r\n    loading: true,\r\n    modalImage:'',\r\n    modalComments:[],\r\n    modalDisplay: false,\r\n    modalLoading: true,\r\n    modalError: false,\r\n    modalId:'',\r\n    overlayStatus: 'overlay-hide'\r\n}\r\n\r\n    const [state, dispatch] = useReducer (imagesReducer, initialState); \r\n\r\n    // get all images from server\r\n    const fetchImages = async () => {\r\n        const {baseUrl} = initialState\r\n        axios.get(baseUrl)\r\n        .then((res) => {\r\n            let images = res.data\r\n            dispatch(({type: FETCH_IMAGES, payload: images}));\r\n        })            \r\n    }\r\n\r\n    // get increased image and comments, if success -> open modal window\r\n    const fetchModalImage = async (id) => {\r\n        const {baseUrl} = initialState;\r\n        axios.get(`${baseUrl}/${id}`)\r\n        .then((res) => {\r\n            let image = {\r\n                url: res.data.url,\r\n                comments: res.data.comments,\r\n                modalId: id\r\n            };\r\n            dispatch(({type: FETCH_MODAL_IMAGE, payload: image}))\r\n        })\r\n        .catch(() => {\r\n            dispatch(({type: FETCH_MODAL_IMAGE_ERROR}))\r\n        })\r\n    }\r\n\r\n    //get value of user's comment, then post it to the server and render on comments list\r\n    const addCommentToImage = (comment) => {\r\n        comment.id = modalComments.length + 1;\r\n        let newComments = modalComments.concat(comment);\r\n        const {baseUrl} = initialState;\r\n        const {modalId} = state;\r\n        axios.post(`${baseUrl}/${modalId}/comments`, {name: comment.date, comment: comment.text, id:  comment.id});\r\n        dispatch(({type:ADD_COMMENT, payload: newComments}));\r\n    }\r\n\r\n    // change overlay's status at hide or show\r\n    const changeOverlayStatus = (status) => {\r\n        dispatch(({type: CHANGE_OVERLAY_STATUS, payload: status}));\r\n    }\r\n\r\n    // close modal window\r\n    const closeModalWindow = () => {dispatch(({type: CLOSE_MODAL_WINDOW}))};\r\n\r\n    const {images, loading, modalImage, modalDisplay, modalComments, modalLoading, overlayStatus, modalError} = state;\r\n\r\n    return (\r\n        <ImagesContext.Provider value={{changeOverlayStatus, addCommentToImage, fetchImages, closeModalWindow, fetchModalImage, modalImage, modalDisplay, images, loading, modalComments, modalLoading, overlayStatus, modalError}}>\r\n            {children}\r\n        </ImagesContext.Provider>\r\n    )\r\n}","import React, { useContext, useState } from \"react\";\r\nimport { ImagesContext } from \"../../context/images/imagesContext\";\r\nimport close from '../../images/close.png';\r\n\r\nconst ModalWindow = () => {\r\n    const {modalImage, modalDisplay, closeModalWindow, modalComments, modalLoading, addCommentToImage, modalError, changeOverlayStatus} = useContext(ImagesContext);\r\n\r\n    //user click on close button\r\n    const onCloseButton = () => {\r\n        closeModalWindow();\r\n        changeOverlayStatus('overlay-hide');\r\n    }\r\n\r\n    //useEffect of overlay winodw (show or hide)\r\n    const [valueError, setValueError] = useState('');\r\n\r\n    // submit button\r\n    const onClickSubmit = (event) => {\r\n        event.preventDefault();       \r\n        const valueForm = event.target.parentNode.elements;\r\n        // get values\r\n        let comments = {date: valueForm.userName.value, text: valueForm.userComment.value}; \r\n        // check length of inputs\r\n        if (comments.date.length>0 && comments.text.length>0) {\r\n            addCommentToImage(comments);\r\n            setValueError('')\r\n            valueForm.userName.value = '';\r\n            valueForm.userComment.value = '';\r\n            \r\n        }\r\n        \r\n        else {setValueError(<p className=\"_red-form\">Заполните оба поля</p>);}\r\n    }\r\n    \r\n    const CommentsCointainer = () => {\r\n        return (            \r\n                modalComments.map(item => { return (\r\n                    \r\n                        <div className=\"_right-side_comment\" key={item.id}>\r\n                            <p className=\"_comment_date\" >{item.date}</p>\r\n                            <p className=\"_comment_text\">{item.text}</p>\r\n                        </div>                    \r\n                )})                \r\n        )\r\n    }\r\n\r\n    const ModalError = () => {\r\n        if(modalError) {\r\n            console.log('error')\r\n            return  <p>Ошибка загрузки</p>\r\n        }\r\n        else return null\r\n    }\r\n\r\n    return (           \r\n        <React.Fragment>                                            \r\n            {modalDisplay ?                            \r\n                <div className=\"modalWindow\">\r\n                    <div className=\"_left-side\">\r\n                        <ModalError />\r\n                        {modalLoading || modalError\r\n                        ?\r\n                            <div className=\"lds-dual-ring\"></div>\r\n                        : <img src={modalImage} alt=\"big\"/>  \r\n                        }\r\n                         <div className=\"_right-side\">\r\n                        <CommentsCointainer />  \r\n                        </div>\r\n                        <form className=\"_left-side_form\">\r\n                            <p className=\"_form_input\"><input placeholder=\"Ваше имя\" name=\"userName\"></input></p>\r\n                            <p className=\"_form_input\"><input placeholder=\"Ваш комментарий\" name=\"userComment\"></input></p>\r\n                            {valueError}\r\n                            <input type=\"submit\" className=\"_form_submit\" onClick={onClickSubmit} disable=\"true\" value=\"Оставить комментарий \"></input>\r\n                        </form>                   \r\n                    </div>\r\n                    <div className=\"_modalWindow_close\" onClick={onCloseButton}>\r\n                        <img src={close}   alt=\"close\" />\r\n                    </div>                                \r\n                </div> \r\n            :null}  \r\n        </React.Fragment>\r\n        \r\n    )\r\n}\r\n\r\nexport default ModalWindow","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACeSURBVHgBrdThDYMgEAXgl7YLuMFbpZt0g67ACp2oruEv3cAVPOL9QpG7w0ueUYEvEAjAXl8JES+qgYf+GCR/xFDq2KFsSJIZPpQ6JtU6eFC2MA9qxiyoG7tCw9gZ2o2V6C1YLkpWDVudXwYsH9qffuf3t2RBcGblMhP8h7+KhVGivQFm1IKZUQ/WRCNYFe3BDuhTHh/JhD5wxH7BcgP64jTEbxIV2AAAAABJRU5ErkJggg==\"","import App from \"./app\";\r\n\r\nexport default App","import React from \"react\";\nimport Header from \"../header\";\nimport Images from \"../images\";\nimport Footer from \"../footer/footer\";\nimport { ImagesState } from \"../../context/images/imagesState\";\nimport ModalWindow from \"../modal-window/modalWindow\";\n\nconst App = () => {\n \n  return (\n      <ImagesState>\n        <Header />\n        <Images />\n        <ModalWindow />\n        <Footer />\n      </ImagesState>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/app';\nimport './styles/css/index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}