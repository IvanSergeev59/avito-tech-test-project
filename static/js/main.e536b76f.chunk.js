(this["webpackJsonpavito-tech"]=this["webpackJsonpavito-tech"]||[]).push([[0],{45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n,c=a(1),o=a.n(c),r=a(20),s=a.n(r),l=a(5),i=a.n(l),d=a(11),m=a(8),u=Object(c.createContext)(),j=a(9),b=a.n(j),O=a(4),p=a(3),h="FETCH_IMAGES",f="FETCH_MODAL_IMAGE",g="CLOSE_MODAL_WINDOW",A="ADD_COMMENT",x="FETCH_MODAL_IMAGE_ERROR",v="CHANGE_OVERLAY_STATUS",y=(n={},Object(O.a)(n,h,(function(e,t){var a=t.payload;return Object(p.a)(Object(p.a)({},e),{},{images:a,loading:!1})})),Object(O.a)(n,f,(function(e,t){var a=t.payload;return Object(p.a)(Object(p.a)({},e),{},{modalImage:a.url,modalComments:a.comments,modalId:a.modalId,modalDisplay:!0,modalLoading:!1})})),Object(O.a)(n,g,(function(e){return Object(p.a)(Object(p.a)({},e),{},{modalDisplay:!1})})),Object(O.a)(n,A,(function(e,t){var a=t.payload;return Object(p.a)(Object(p.a)({},e),{},{modalComments:a})})),Object(O.a)(n,x,(function(e){return Object(p.a)(Object(p.a)({},e),{},{modalError:!0,modalDisplay:!0,modalLoading:!1})})),Object(O.a)(n,v,(function(e,t){var a=t.payload;return Object(p.a)(Object(p.a)({},e),{},{overlayStatus:a})})),Object(O.a)(n,"DEFAULT",(function(e){return e})),n),C=function(e,t){return(y[t.type]||y.DEFAULT)(e,t)},E=a(0),_=function(e){var t=e.children,a={baseUrl:"https://boiling-refuge-66454.herokuapp.com/images",images:[],loading:!0,modalImage:"",modalComments:[],modalDisplay:!1,modalLoading:!0,modalError:!1,modalId:"",overlayStatus:"overlay-hide"},n=Object(c.useReducer)(C,a),o=Object(m.a)(n,2),r=o[0],s=o[1],l=function(){var e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.baseUrl,b.a.get(t).then((function(e){var t=e.data;s({type:h,payload:t})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(d.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.baseUrl,b.a.get("".concat(n,"/").concat(t)).then((function(e){var a={url:e.data.url,comments:e.data.comments,modalId:t};s({type:f,payload:a})})).catch((function(){s({type:x})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=r.images,p=r.loading,y=r.modalImage,_=r.modalDisplay,N=r.modalComments,I=r.modalLoading,D=r.overlayStatus,w=r.modalError;return Object(E.jsx)(u.Provider,{value:{changeOverlayStatus:function(e){s({type:v,payload:e})},addCommentToImage:function(e){e.id=N.length+1;var t=N.concat(e),n=a.baseUrl,c=r.modalId;b.a.post("".concat(n,"/").concat(c,"/comments"),{name:e.date,comment:e.text,id:e.id}),s({type:A,payload:t})},fetchImages:l,closeModalWindow:function(){s({type:g})},fetchModalImage:j,modalImage:y,modalDisplay:_,images:O,loading:p,modalComments:N,modalLoading:I,overlayStatus:D,modalError:w},children:t})},N=function(){return Object(E.jsx)("div",{className:"header",children:Object(E.jsx)("h1",{children:"test app"})})},I=function(){var e=Object(c.useContext)(u),t=e.fetchImages,a=e.fetchModalImage,n=e.images,o=e.loading,r=e.closeModalWindow,s=e.overlayStatus,l=e.changeOverlayStatus;Object(c.useEffect)((function(){t()}),[]);var i=function(){r(),l("overlay-hide")},d=function(){return Object(E.jsx)("div",{className:"overlay ".concat(s),onClick:i})},m=function(){var e=function(e){a(e.target.id),l("overlay-show")},t=function(){return n.map((function(t){return Object(E.jsx)("li",{onClick:e,children:Object(E.jsx)("img",{id:t.id,alt:"",src:t.url})},t.id)}))};return Object(E.jsx)("ul",{children:o?Object(E.jsx)(j,{}):Object(E.jsx)(t,{})})},j=function(){return Object(E.jsx)("div",{className:"lds-dual-ring"})};return Object(E.jsxs)("div",{className:"images",children:[Object(E.jsx)(d,{}),Object(E.jsx)(m,{})]})},D=function(){return Object(E.jsxs)("div",{className:"footer",children:[Object(E.jsx)("hr",{}),Object(E.jsx)("p",{children:"\xa9 2018-2019"})]})},w=function(){var e=Object(c.useContext)(u),t=e.modalImage,a=e.modalDisplay,n=e.closeModalWindow,r=e.modalComments,s=e.modalLoading,l=e.addCommentToImage,i=e.modalError,d=e.changeOverlayStatus,j=Object(c.useState)(""),b=Object(m.a)(j,2),O=b[0],p=b[1],h=function(){return r.map((function(e){return Object(E.jsxs)("div",{className:"_right-side_comment",children:[Object(E.jsx)("p",{className:"_comment_date",children:e.date}),Object(E.jsx)("p",{className:"_comment_text",children:e.text})]},e.id)}))},f=function(){return i?(console.log("error"),Object(E.jsx)("p",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"})):null};return Object(E.jsxs)(o.a.Fragment,{children:[a?Object(E.jsxs)("div",{className:"modalWindow",children:[Object(E.jsxs)("div",{className:"_left-side",children:[Object(E.jsx)(f,{}),s||i?Object(E.jsx)("div",{className:"lds-dual-ring"}):Object(E.jsx)("img",{src:t,alt:"big"}),Object(E.jsx)("div",{className:"_right-side",children:Object(E.jsx)(h,{})}),Object(E.jsxs)("form",{className:"_left-side_form",children:[Object(E.jsx)("p",{className:"_form_input",children:Object(E.jsx)("input",{placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",name:"userName"})}),Object(E.jsx)("p",{className:"_form_input",children:Object(E.jsx)("input",{placeholder:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",name:"userComment"})}),O,Object(E.jsx)("input",{type:"submit",className:"_form_submit",onClick:function(e){e.preventDefault();var t=e.target.parentNode.elements,a={date:t.userName.value,text:t.userComment.value};a.date.length>0&&a.text.length>0?(l(a),p(""),t.userName.value="",t.userComment.value=""):p(Object(E.jsx)("p",{className:"_red-form",children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u0430 \u043f\u043e\u043b\u044f"}))},disable:"true",value:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 "})]})]}),Object(E.jsx)("div",{className:"_modalWindow_close",onClick:function(){n(),d("overlay-hide")},children:Object(E.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACeSURBVHgBrdThDYMgEAXgl7YLuMFbpZt0g67ACp2oruEv3cAVPOL9QpG7w0ueUYEvEAjAXl8JES+qgYf+GCR/xFDq2KFsSJIZPpQ6JtU6eFC2MA9qxiyoG7tCw9gZ2o2V6C1YLkpWDVudXwYsH9qffuf3t2RBcGblMhP8h7+KhVGivQFm1IKZUQ/WRCNYFe3BDuhTHh/JhD5wxH7BcgP64jTEbxIV2AAAAABJRU5ErkJggg==",alt:"close"})})]}):null,Object(E.jsx)(N,{}),Object(E.jsx)(I,{}),Object(E.jsx)(D,{})]})},M=function(){return Object(E.jsx)(_,{children:Object(E.jsx)(w,{})})};a(45);s.a.render(Object(E.jsx)(o.a.StrictMode,{children:Object(E.jsx)(M,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.e536b76f.chunk.js.map