(this["webpackJsonpavito-tech"]=this["webpackJsonpavito-tech"]||[]).push([[0],{45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n,c=a(1),o=a.n(c),r=a(20),s=a.n(r),l=a(5),i=a.n(l),d=a(11),m=a(8),u=Object(c.createContext)(),j=a(9),b=a.n(j),O=a(4),g=a(3),p="FETCH_IMAGES",h="FETCH_MODAL_IMAGE",f="CLOSE_MODAL_WINDOW",A="ADD_COMMENT",v="FETCH_MODAL_IMAGE_ERROR",x="CHANGE_OVERLAY_STATUS",y=(n={},Object(O.a)(n,p,(function(e,t){var a=t.payload;return Object(g.a)(Object(g.a)({},e),{},{images:a,loading:!1})})),Object(O.a)(n,h,(function(e,t){var a=t.payload;return Object(g.a)(Object(g.a)({},e),{},{modalImage:a.url,modalComments:a.comments,modalId:a.modalId,modalDisplay:!0,modalLoading:!1})})),Object(O.a)(n,f,(function(e){return Object(g.a)(Object(g.a)({},e),{},{modalDisplay:!1})})),Object(O.a)(n,A,(function(e,t){var a=t.payload;return Object(g.a)(Object(g.a)({},e),{},{modalComments:a})})),Object(O.a)(n,v,(function(e){return Object(g.a)(Object(g.a)({},e),{},{modalError:!0,modalDisplay:!0,modalLoading:!1})})),Object(O.a)(n,x,(function(e,t){var a=t.payload;return Object(g.a)(Object(g.a)({},e),{},{overlayStatus:a})})),Object(O.a)(n,"DEFAULT",(function(e){return e})),n),C=function(e,t){return(y[t.type]||y.DEFAULT)(e,t)},_=a(0),E=function(e){var t=e.children,a={baseUrl:"https://boiling-refuge-66454.herokuapp.com/images",images:[],loading:!0,modalImage:"",modalComments:[],modalDisplay:!1,modalLoading:!0,modalError:!1,modalId:"",overlayStatus:"overlay-hide"},n=Object(c.useReducer)(C,a),o=Object(m.a)(n,2),r=o[0],s=o[1],l=function(){var e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.baseUrl,b.a.get(t).then((function(e){var t=e.data;s({type:p,payload:t})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(d.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.baseUrl,b.a.get("".concat(n,"/").concat(t)).then((function(e){var a={url:e.data.url,comments:e.data.comments,modalId:t};s({type:h,payload:a})})).catch((function(){s({type:v})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=r.images,g=r.loading,y=r.modalImage,E=r.modalDisplay,N=r.modalComments,I=r.modalLoading,D=r.overlayStatus,w=r.modalError;return Object(_.jsx)(u.Provider,{value:{changeOverlayStatus:function(e){s({type:x,payload:e})},addCommentToImage:function(e){e.id=N.length+1;var t=N.concat(e),n=a.baseUrl,c=r.modalId;b.a.post("".concat(n,"/").concat(c,"/comments"),{name:e.date,comment:e.text,id:e.id}),s({type:A,payload:t})},fetchImages:l,closeModalWindow:function(){s({type:f})},fetchModalImage:j,modalImage:y,modalDisplay:E,images:O,loading:g,modalComments:N,modalLoading:I,overlayStatus:D,modalError:w},children:t})},N=function(){return Object(_.jsx)("div",{className:"header",children:Object(_.jsx)("h1",{children:"test app"})})},I=function(){var e=Object(c.useContext)(u),t=e.fetchImages,a=e.fetchModalImage,n=e.images,o=e.loading,r=e.closeModalWindow,s=e.overlayStatus,l=e.changeOverlayStatus;Object(c.useEffect)((function(){t()}),[]);var i=function(){r(),l("overlay-hide"),document.getElementsByName("body")[0].classList.toggle("hystmodal__opened")},d=function(){return Object(_.jsx)("div",{className:"overlay ".concat(s),onClick:i})},m=function(){var e=function(e){a(e.target.id),document.getElementsByName("body")[0].classList.toggle("hystmodal__opened"),l("overlay-show")},t=function(){return n.map((function(t){return Object(_.jsx)("li",{onClick:e,children:Object(_.jsx)("img",{id:t.id,alt:"",src:t.url})},t.id)}))};return Object(_.jsx)("ul",{children:o?Object(_.jsx)(j,{}):Object(_.jsx)(t,{})})},j=function(){return Object(_.jsx)("div",{className:"lds-dual-ring"})};return Object(_.jsxs)("div",{className:"images",children:[Object(_.jsx)(d,{}),Object(_.jsx)(m,{})]})},D=function(){return Object(_.jsxs)("div",{className:"footer",children:[Object(_.jsx)("hr",{}),Object(_.jsx)("p",{children:"\xa9 2018-2019"})]})},w=function(){var e=Object(c.useContext)(u),t=e.modalImage,a=e.modalDisplay,n=e.closeModalWindow,r=e.modalComments,s=e.modalLoading,l=e.addCommentToImage,i=e.modalError,d=e.changeOverlayStatus,j=Object(c.useState)(""),b=Object(m.a)(j,2),O=b[0],g=b[1],p=function(){g(Object(_.jsx)("p",{className:"_red-form",children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u0430 \u043f\u043e\u043b\u044f"}))},h={},f=function(e){if((h={date:e.userName.value,text:e.userComment.value}).date.length>0&&h.text.length>0)return!0},A=function(e){var t=e.target.parentNode.parentNode.elements;f(t)?g(""):p()},v=function(){return r.map((function(e){return Object(_.jsxs)("div",{className:"_right-side_comment",children:[Object(_.jsx)("p",{className:"_comment_date",children:e.date}),Object(_.jsx)("p",{className:"_comment_text",children:e.text})]},e.id)}))},x=function(){return Object(_.jsx)("div",{children:i&&Object(_.jsx)("p",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"})})};return Object(_.jsxs)(o.a.Fragment,{children:[a?Object(_.jsxs)("div",{className:"modalWindow",children:[Object(_.jsxs)("div",{className:"_left-side",children:[Object(_.jsx)(x,{}),s||i?Object(_.jsx)("div",{className:"lds-dual-ring"}):Object(_.jsx)("img",{src:t,alt:"big"}),Object(_.jsx)("div",{className:"_right-side",children:Object(_.jsx)(v,{})}),Object(_.jsxs)("form",{className:"_left-side_form",children:[Object(_.jsx)("p",{className:"_form_input",children:Object(_.jsx)("input",{placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",name:"userName",onChange:A})}),Object(_.jsx)("p",{className:"_form_input",children:Object(_.jsx)("input",{placeholder:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",name:"userComment",onChange:A})}),O,Object(_.jsx)("input",{type:"submit",className:"_form_submit",onClick:function(e){e.preventDefault();var t=e.target.parentNode.elements;f(t)?(l(h),g(""),function(e){e.userName.value="",e.userComment.value=""}(t)):p()},disable:"true",value:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 "})]})]}),Object(_.jsx)("div",{className:"_modalWindow_close",onClick:function(){n(),d("overlay-hide"),document.getElementsByName("body")[0].classList.toggle("hystmodal__opened")},children:Object(_.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACeSURBVHgBrdThDYMgEAXgl7YLuMFbpZt0g67ACp2oruEv3cAVPOL9QpG7w0ueUYEvEAjAXl8JES+qgYf+GCR/xFDq2KFsSJIZPpQ6JtU6eFC2MA9qxiyoG7tCw9gZ2o2V6C1YLkpWDVudXwYsH9qffuf3t2RBcGblMhP8h7+KhVGivQFm1IKZUQ/WRCNYFe3BDuhTHh/JhD5wxH7BcgP64jTEbxIV2AAAAABJRU5ErkJggg==",alt:"close"})})]}):null,Object(_.jsx)(N,{}),Object(_.jsx)(I,{}),Object(_.jsx)(D,{})]})},L=function(){return Object(_.jsx)(E,{children:Object(_.jsx)(w,{})})};a(45);s.a.render(Object(_.jsx)(o.a.StrictMode,{children:Object(_.jsx)(L,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.f7fc2728.chunk.js.map